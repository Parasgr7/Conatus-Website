<html lang="en">

<head>
    <title>three.js</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/creative.css">
    <style>
    body {
        /* Rectangle 1: */
        /* background: linear-gradient(-180deg, #0e293c 0%, #1890c6  100%); */
        background: url( 'one.jpg' ) no-repeat center;
        background-size: cover;
        /* background: radial-gradient(circle, #1890c6,#0e293c,#00080e ); */
        margin: 0px;
        
        overflow: hidden;
    }
    
    a {
        color: #dfe6ec;
    }
    </style>
</head>

<body>
    <script type="text/javascript">
    ANCHORFREE_VERSION = "413161526"
    </script>
    <script type='text/javascript'>
    (function() {
        if (typeof(_AF2$runned) != 'undefined' && _AF2$runned == true) {
            return
        }
        _AF2$ = {
            'SN': 'HSSHIELD00ZZ',
            'IP': '54.82.244.26',
            'CH': 'HSSCNL100553',
            'CT': 'oxm,z219',
            'HST': '',
            'AFH': 'hss750',
            'RN': Math.floor(Math.random() * 999),
            'TOP': (parent.location != document.location || top.location != document.location) ? 0 : 1,
            'AFVER': '3.19',
            'FBW': '',
            'FBWCNT': 0
        };
        if (/^(.*,)?(11C)(,.*)?$/g.exec(_AF2$.CT) != null) {
            document.write("<scr" + "ipt src='http://box.anchorfree.net/insert/par.js?v=" + ANCHORFREE_VERSION + "' type='text/javascript'></scr" + "ipt>")
        }
        document.write("<style type='text/css' title='AFc_css" + _AF2$.RN + "' >.AFc_body" + _AF2$.RN + "{} .AFc_all" + _AF2$.RN + ",a.AFc_all" + _AF2$.RN + ":hover,a.AFc_all" + _AF2$.RN + ":visited{outline:none;background:transparent;border:none;margin:0;padding:0;top:0;left:0;text-decoration:none;overflow:hidden;display:block;z-index:666999;}</style>");
    })();
    </script>
    <style type='text/css'>
    .AFhss_dpnone {
        display: none;
        width: 0;
        height: 0
    }
    </style><img src="about:blank" id="AFhss_trk" name="AFhss_trk" style="display:none" />
    <div id="AFhss_dfs" class="AFhss_dpnone">
        <div id="AFhss_adrp0" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp1" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp2" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp3" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp4" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp5" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp6" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp7" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp8" class="AFhss_dpnone"></div>
        <div id="AFhss_adrp9" class="AFhss_dpnone"></div>
    </div>
    <script type='text/javascript'>
    (function() {
        if (typeof(_AF2$runned) != 'undefined' && _AF2$runned == true) {
            return
        }
        _AF2$ = {
            'SN': 'HSSHIELD00ZZ',
            'IP': '54.82.244.26',
            'CH': 'HSSCNL100553',
            'CT': 'oxm,z219',
            'HST': '',
            'AFH': 'hss750',
            'RN': Math.floor(Math.random() * 999),
            'TOP': (parent.location != document.location || top.location != document.location) ? 0 : 1,
            'AFVER': '3.19',
            'FBW': '',
            'FBWCNT': 0
        };
        if (_AF2$.TOP == 1) {
            document.write("<scr" + "ipt src='http://box.anchorfree.net/insert/41.js?v=" + ANCHORFREE_VERSION + "' type='text/javascript'></scr" + "ipt>")
        }
    })()
    </script>
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
    <script src="http://threejs.org/build/three.min.js"></script>
    <script src="http://threejs.org/examples/js/renderers/Projector.js"></script>
    <script src="http://threejs.org/examples/js/renderers/CanvasRenderer.js"></script>
    <script src="http://threejs.org/examples/js/libs/stats.min.js"></script>
    <script>
    var ww = window.innerWidth;
    var container, stats;
    var camera, scene, renderer;
    var SEPARATION = ww / 30,
        AMOUNTX = 100,
        AMOUNTY = 100;
    var particles, particle, count = 0;

    var mouseX = 0,
        mouseY = 0;

    var windowHalfX = window.innerWidth / 4.5;
    var windowHalfY = window.innerHeight / 4.5;

    init();
    animate();


    // we wait until the document is loaded before loading the
    // density data.
    var clickData;
    $(document).ready(function() {

        var dat;
        $.getJSON('clickmap.json', function(data) {
            dat = data;
        });

        // console.log(data);





        //var result = $.parseJSON(jData); 

        /*            for (var i=0; i<=data.length; i++) {
                        
                    
           
                    }*/
    }); //end jQuery


    function init() {

        container = document.createElement('div');
        document.body.appendChild(container);

        camera = new THREE.PerspectiveCamera(12, 2 * (window.innerWidth) / window.innerHeight, 500, 8000);
        // camera = new THREE.PerspectiveCamera( 50, 2*(window.innerWidth) / window.innerHeight, 500, 10000 );
        camera.position.z = -500;

        scene = new THREE.Scene();

        particles = new Array();

        var PI2 = Math.PI * 3;
        var material = new THREE.SpriteCanvasMaterial({

            color: 0xFFFFFF,
            opacity: 0.6,
            program: function(context) {

                context.beginPath();
                //context.arc( 0, 0, 0.3, 0, PI2, true );
                context.arc(0, 0.1, 0.1, 0.1, PI2, true);
                context.fill();


            }

        });

        var i = 0;

        for (var ix = 0; ix < AMOUNTX; ix++) {

            for (var iy = 0; iy < AMOUNTY; iy++) {

                particle = particles[i++] = new THREE.Sprite(material);
                particle.position.x = ix * SEPARATION - ((AMOUNTX * SEPARATION) / (Math.PI));
                particle.position.z = iy * SEPARATION - ((AMOUNTY * SEPARATION) / (6 * Math.PI));
                scene.add(particle);

            } //for iy

        } //for ix

        renderer = new THREE.CanvasRenderer({
            alpha: true
        });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0xFFFFFF, 0);
        container.appendChild(renderer.domElement);

        stats = new Stats();
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.top = '00px';
        // container.appendChild(stats.domElement);

        document.addEventListener('mousemove', onDocumentMouseMove, false);
        document.addEventListener('touchstart', onDocumentTouchStart, false);
        document.addEventListener('touchmove', onDocumentTouchMove, false);

        //

        window.addEventListener('resize', onWindowResize, false);

    }

    // from http://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data
    function CSVToArray(strData, strDelimiter) {
        // Check to see if the delimiter is defined. If not,
        // then default to comma.
        strDelimiter = (strDelimiter || ",");

        // Create a regular expression to parse the CSV values.
        var objPattern = new RegExp(
            (
                // Delimiters.
                "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

                // Quoted fields.
                "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

                // Standard fields.
                "([^\"\\" + strDelimiter + "\\r\\n]*))"
            ),
            "gi"
        );
    }

    function onWindowResize() {

        windowHalfX = window.innerWidth / 2;
        windowHalfY = window.innerHeight / 2;

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);

    }

    //

    function onDocumentMouseMove(event) {

        mouseX = event.clientX - (windowHalfX);
        mouseY = event.clientY - (windowHalfY);

    }

    function onDocumentTouchStart(event) {

        if (event.touches.length === 1) {

            event.preventDefault();

            mouseX = event.touches[0].pageX - windowHalfX;
            mouseY = event.touches[0].pageY - windowHalfY;

        }

    }

    function onDocumentTouchMove(event) {

        if (event.touches.length === 1) {

            event.preventDefault();

            mouseX = event.touches[0].pageX - windowHalfX;
            mouseY = event.touches[0].pageY - windowHalfY;
        }

    }

    //

    function animate() {

        requestAnimationFrame(animate);

        render();
        stats.update();

    }

    function render() {

        camera.position.x += (mouseX - camera.position.x) * .005;
        camera.position.y += (mouseY - camera.position.y) * .005;
        camera.lookAt(scene.position);
        var i = 0;

        for (var ix = 0; ix < AMOUNTX; ix++) {

            for (var iy = 0; iy < AMOUNTY; iy++) {

                particle = particles[i++];
                particle.position.y = (Math.sin((ix + count) * 0.1) * 250) +
                    (Math.sin((iy + count) * 0.2) * 50);
                particle.scale.x = particle.scale.y = (Math.sin((ix + count) * 0.2) + 1) * 4 +
                    (Math.sin((iy + count) * 0.15) + 1) * 7;

            }

        }

        renderer.render(scene, camera);

        count += 0.1;

    }
    </script>
</body>


</html>
